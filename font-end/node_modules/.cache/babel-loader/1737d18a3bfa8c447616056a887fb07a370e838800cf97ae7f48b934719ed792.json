{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from \"react\";\nfunction useForm(_ref) {\n  _s();\n  let {\n    form,\n    additionalData,\n    endpointUrl\n  } = _ref;\n  const [status, setStatus] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const headers = {\n    \"x-access-token\": localStorage.getItem(\"token\")\n  };\n  const handleSubmit = e => {\n    if (form) {\n      e.preventDefault();\n      setStatus(\"loading\");\n      setMessage(\"\");\n      const finalFormEndpoint = \"http://localhost:8000/api/comment/create\" || form.action;\n      const data = Array.from(form.elements).filter(input => input.name).reduce((obj, input) => Object.assign(obj, {\n        [input.name]: input.value\n      }), {});\n      if (additionalData) {\n        Object.assign(data, additionalData);\n      }\n      fetch(finalFormEndpoint, {\n        method: \"POST\",\n        headers: headers,\n        body: JSON.stringify(data)\n      }).then(response => {\n        if (response.status !== 200) {\n          throw new Error(response.statusText);\n        }\n        return response.json();\n      }).then(() => {\n        setMessage(\"We'll be in touch soon.\");\n        setStatus(\"success\");\n      }).catch(err => {\n        setMessage(err.toString());\n        setStatus(\"error\");\n        console.log();\n      });\n    }\n  };\n  return {\n    handleSubmit,\n    status,\n    message\n  };\n}\n_s(useForm, \"k3INLmPyJR7pqClv/jBr3dMhcH0=\");\nexport default useForm;","map":{"version":3,"names":["useState","useForm","form","additionalData","endpointUrl","status","setStatus","message","setMessage","headers","localStorage","getItem","handleSubmit","e","preventDefault","finalFormEndpoint","action","data","Array","from","elements","filter","input","name","reduce","obj","Object","assign","value","fetch","method","body","JSON","stringify","then","response","Error","statusText","json","catch","err","toString","console","log"],"sources":["E:/thuctap3/TTCN-wido/font-end/src/components/UseForm.js"],"sourcesContent":["import { useState } from \"react\";\r\n\r\nfunction useForm({ form, additionalData, endpointUrl }) {\r\n  const [status, setStatus] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n  const headers = {\r\n    \"x-access-token\": localStorage.getItem(\"token\"),\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    if (form) {\r\n      e.preventDefault();\r\n      setStatus(\"loading\");\r\n      setMessage(\"\");\r\n\r\n      const finalFormEndpoint = \"http://localhost:8000/api/comment/create\" || form.action;\r\n      const data = Array.from(form.elements)\r\n        .filter((input) => input.name)\r\n        .reduce(\r\n          (obj, input) => Object.assign(obj, { [input.name]: input.value }),\r\n          {}\r\n        );\r\n\r\n      if (additionalData) {\r\n        Object.assign(data, additionalData);\r\n      }\r\n\r\n      fetch(finalFormEndpoint, {\r\n        method: \"POST\",\r\n        headers: headers,\r\n        body: JSON.stringify(data),\r\n      })\r\n        .then((response) => {\r\n          if (response.status !== 200) {\r\n            throw new Error(response.statusText);\r\n          }\r\n\r\n          return response.json();\r\n        })\r\n        .then(() => {\r\n          setMessage(\"We'll be in touch soon.\");\r\n          setStatus(\"success\");\r\n        })\r\n        .catch((err) => {\r\n          setMessage(err.toString());\r\n          setStatus(\"error\");\r\n          console.log()\r\n        });\r\n    }\r\n  };\r\n\r\n  return { handleSubmit, status, message };\r\n}\r\n\r\nexport default useForm;"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,OAAO;AAEhC,SAASC,OAAO,OAAwC;EAAA;EAAA,IAAvC;IAAEC,IAAI;IAAEC,cAAc;IAAEC;EAAY,CAAC;EACpD,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGN,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACO,OAAO,EAAEC,UAAU,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAMS,OAAO,GAAG;IACd,gBAAgB,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO;EAChD,CAAC;EAED,MAAMC,YAAY,GAAIC,CAAC,IAAK;IAC1B,IAAIX,IAAI,EAAE;MACRW,CAAC,CAACC,cAAc,EAAE;MAClBR,SAAS,CAAC,SAAS,CAAC;MACpBE,UAAU,CAAC,EAAE,CAAC;MAEd,MAAMO,iBAAiB,GAAG,0CAA0C,IAAIb,IAAI,CAACc,MAAM;MACnF,MAAMC,IAAI,GAAGC,KAAK,CAACC,IAAI,CAACjB,IAAI,CAACkB,QAAQ,CAAC,CACnCC,MAAM,CAAEC,KAAK,IAAKA,KAAK,CAACC,IAAI,CAAC,CAC7BC,MAAM,CACL,CAACC,GAAG,EAAEH,KAAK,KAAKI,MAAM,CAACC,MAAM,CAACF,GAAG,EAAE;QAAE,CAACH,KAAK,CAACC,IAAI,GAAGD,KAAK,CAACM;MAAM,CAAC,CAAC,EACjE,CAAC,CAAC,CACH;MAEH,IAAIzB,cAAc,EAAE;QAClBuB,MAAM,CAACC,MAAM,CAACV,IAAI,EAAEd,cAAc,CAAC;MACrC;MAEA0B,KAAK,CAACd,iBAAiB,EAAE;QACvBe,MAAM,EAAE,MAAM;QACdrB,OAAO,EAAEA,OAAO;QAChBsB,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAChB,IAAI;MAC3B,CAAC,CAAC,CACCiB,IAAI,CAAEC,QAAQ,IAAK;QAClB,IAAIA,QAAQ,CAAC9B,MAAM,KAAK,GAAG,EAAE;UAC3B,MAAM,IAAI+B,KAAK,CAACD,QAAQ,CAACE,UAAU,CAAC;QACtC;QAEA,OAAOF,QAAQ,CAACG,IAAI,EAAE;MACxB,CAAC,CAAC,CACDJ,IAAI,CAAC,MAAM;QACV1B,UAAU,CAAC,yBAAyB,CAAC;QACrCF,SAAS,CAAC,SAAS,CAAC;MACtB,CAAC,CAAC,CACDiC,KAAK,CAAEC,GAAG,IAAK;QACdhC,UAAU,CAACgC,GAAG,CAACC,QAAQ,EAAE,CAAC;QAC1BnC,SAAS,CAAC,OAAO,CAAC;QAClBoC,OAAO,CAACC,GAAG,EAAE;MACf,CAAC,CAAC;IACN;EACF,CAAC;EAED,OAAO;IAAE/B,YAAY;IAAEP,MAAM;IAAEE;EAAQ,CAAC;AAC1C;AAAC,GAlDQN,OAAO;AAoDhB,eAAeA,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}