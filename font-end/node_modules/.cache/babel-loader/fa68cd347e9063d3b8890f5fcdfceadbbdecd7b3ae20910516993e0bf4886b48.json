{"ast":null,"code":"var _jsxFileName = \"E:\\\\thuctap3\\\\TTCN-wido\\\\font-end\\\\src\\\\components\\\\Admin\\\\Post.js\";\nimport React, { Component } from \"react\";\nimport axios, * as others from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Post extends Component {\n  constructor(props) {\n    super(props);\n    this.handleDelete = item => {\n      const newsId = item.id_post;\n      axios.delete(\"http://localhost:8000/api/post/\" + newsId, {\n        headers: {\n          \"x-access-token\": localStorage.getItem(\"token\")\n        }\n      }).then(res => {\n        this.setState(prevState => ({\n          posts: prevState.posts.filter(el => el.id !== item.id_post)\n        }));\n        this.componentDidMount();\n      });\n    };\n    this.state = {\n      posts: [],\n      limit: \"\"\n    };\n  }\n  async componentDidMount() {\n    await axios.get(\"http://localhost:8000/api/admin/statistic\", {\n      headers: {\n        \"x-access-token\": localStorage.getItem(\"token\")\n      }\n    }).then(res => {\n      const sum_post = res.data;\n      this.state.limit = sum_post.statistic.sum_post;\n    });\n    axios.get(\"http://localhost:8000/api/post/home?_limit=\" + this.state.limit + \"&_page=0\", {\n      headers: {\n        \"x-access-token\": localStorage.getItem(\"token\")\n      }\n    }).then(res => {\n      const post = res.data;\n      this.setState({\n        posts: post.posts\n      });\n    });\n  }\n  //xóa bài viết\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"section2\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table\",\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"col-9\",\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"col-2\",\n              children: \"id\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"col-2\",\n              children: \"n\\u1ED9i dung\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"col-2\",\n              children: \"ng\\xE0y \\u0111\\u0103ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"col-2\",\n              children: \"ng\\u01B0\\u1EDDi \\u0111\\u0103ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this), this.state.posts.map(item => /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"col-9\",\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"col-2\",\n              children: item.id_post\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"col-2 content\",\n              children: item.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"col-2\",\n              children: item.createdAt\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"col-2\",\n              children: item.User.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"col-1\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => this.handleDetail(item),\n                children: \"chi ti\\u1EBFt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"col-1\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => this.handleDelete(item),\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  class: \"fa fa-trash\",\n                  children: \"x\\xF3a\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 81,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 17\n            }, this)]\n          }, item.id_post, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default Post;","map":{"version":3,"names":["React","Component","axios","others","Post","constructor","props","handleDelete","item","newsId","id_post","delete","headers","localStorage","getItem","then","res","setState","prevState","posts","filter","el","id","componentDidMount","state","limit","get","sum_post","data","statistic","post","render","map","content","createdAt","User","name","handleDetail"],"sources":["E:/thuctap3/TTCN-wido/font-end/src/components/Admin/Post.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport axios, * as others from \"axios\";\r\n\r\nclass Post extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      posts: [],\r\n      limit: \"\",\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await axios\r\n      .get(\"http://localhost:8000/api/admin/statistic\", {\r\n        headers: {\r\n          \"x-access-token\": localStorage.getItem(\"token\"),\r\n        },\r\n      })\r\n      .then((res) => {\r\n        const sum_post = res.data;\r\n        this.state.limit = sum_post.statistic.sum_post;\r\n      });\r\n    axios\r\n      .get(\r\n        \"http://localhost:8000/api/post/home?_limit=\" +\r\n          this.state.limit +\r\n          \"&_page=0\",\r\n        {\r\n          headers: {\r\n            \"x-access-token\": localStorage.getItem(\"token\"),\r\n          },\r\n        }\r\n      )\r\n      .then((res) => {\r\n        const post = res.data;\r\n        this.setState({ posts: post.posts });\r\n      });\r\n  }\r\n  //xóa bài viết\r\n  handleDelete = (item) => {\r\n    const newsId = item.id_post;\r\n\r\n    axios\r\n      .delete(\"http://localhost:8000/api/post/\" + newsId, {\r\n        headers: {\r\n          \"x-access-token\": localStorage.getItem(\"token\"),\r\n        },\r\n      })\r\n      .then((res) => {\r\n        this.setState((prevState) => ({\r\n          posts: prevState.posts.filter((el) => el.id !== item.id_post),\r\n        }));\r\n        this.componentDidMount();\r\n      });\r\n  };\r\n  render() {\r\n    return (\r\n      <div>\r\n        <section className=\"section2\">\r\n          <table className=\"table\">\r\n            <tr className=\"col-9\">\r\n              <td className=\"col-2\">id</td>\r\n              <td className=\"col-2\">nội dung</td>\r\n              <td className=\"col-2\">ngày đăng</td>\r\n              <td className=\"col-2\">người đăng</td>\r\n            </tr>\r\n            {this.state.posts.map((item) => (\r\n              <tr key={item.id_post} className=\"col-9\">\r\n                <td className=\"col-2\">{item.id_post}</td>\r\n                <td className=\"col-2 content\">{item.content}</td>\r\n                <td className=\"col-2\">{item.createdAt}</td>\r\n                <td className=\"col-2\">{item.User.name}</td>\r\n                <td className=\"col-1\">\r\n                  <button onClick={() => this.handleDetail(item)}>\r\n                    chi tiết\r\n                  </button>\r\n                </td>\r\n                <td className=\"col-1\">\r\n                  <button onClick={() => this.handleDelete(item)}>\r\n                    <i class=\"fa fa-trash\">xóa</i>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </table>\r\n        </section>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Post;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}