{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from \"react\";\nfunction useForm(_ref) {\n  _s();\n  let {\n    form,\n    additionalData,\n    endpointUrl,\n    callbackfield\n  } = _ref;\n  const [status, setStatus] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const headers = {\n    \"x-access-token\": localStorage.getItem(\"token\")\n  };\n  const handleSubmit = e => {\n    if (form) {\n      e.preventDefault();\n      setStatus(\"loading\");\n      setMessage(\"\");\n      const finalFormEndpoint = endpointUrl || form.action;\n      const data = Array.from(form.elements).filter(input => input.name).reduce((obj, input) => Object.assign(obj, {\n        [input.name]: input.value\n      }), {});\n      if (additionalData) {\n        Object.assign(data, additionalData);\n      }\n      console.log(data);\n      fetch(finalFormEndpoint, {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          \"x-access-token\": localStorage.getItem(\"token\")\n        },\n        body: JSON.stringify(data)\n      }).then(response => {\n        if (response.status !== 200) {\n          throw new Error(response.statusText);\n        }\n        return response.json();\n      }).then(() => {\n        setMessage(\"We'll be in touch soon.\");\n        setStatus(\"success\");\n        console.log(\"thanh cong????\");\n        callbackfield();\n        console.log(\"thanh cong va call qua????\");\n      }).catch(err => {\n        setMessage(err.toString());\n        setStatus(\"error\");\n        console.log(\"loi\");\n        console.log(\"du lieu\", data);\n      });\n    }\n  };\n  return {\n    handleSubmit,\n    status,\n    message\n  };\n}\n_s(useForm, \"k3INLmPyJR7pqClv/jBr3dMhcH0=\");\nexport default useForm;","map":{"version":3,"names":["useState","useForm","form","additionalData","endpointUrl","callbackfield","status","setStatus","message","setMessage","headers","localStorage","getItem","handleSubmit","e","preventDefault","finalFormEndpoint","action","data","Array","from","elements","filter","input","name","reduce","obj","Object","assign","value","console","log","fetch","method","Accept","body","JSON","stringify","then","response","Error","statusText","json","catch","err","toString"],"sources":["E:/thuctap3/TTCN-wido/font-end/src/components/UseForm.js"],"sourcesContent":["import { useState } from \"react\";\r\n\r\nfunction useForm({ form, additionalData, endpointUrl, callbackfield }) {\r\n  const [status, setStatus] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n  const headers = {\r\n    \"x-access-token\": localStorage.getItem(\"token\"),\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    if (form) {\r\n      e.preventDefault();\r\n      setStatus(\"loading\");\r\n      setMessage(\"\");\r\n\r\n      const finalFormEndpoint = endpointUrl || form.action;\r\n      const data = Array.from(form.elements)\r\n        .filter((input) => input.name)\r\n        .reduce(\r\n          (obj, input) => Object.assign(obj, { [input.name]: input.value }),\r\n          {}\r\n        );\r\n\r\n      if (additionalData) {\r\n        Object.assign(data, additionalData);\r\n      }\r\n      console.log(data);\r\n\r\n      fetch(finalFormEndpoint, {\r\n        method: \"POST\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          \"x-access-token\": localStorage.getItem(\"token\"),\r\n        },\r\n        body: JSON.stringify(data),\r\n      })\r\n        .then((response) => {\r\n          if (response.status !== 200) {\r\n            throw new Error(response.statusText);\r\n          }\r\n\r\n          return response.json();\r\n        })\r\n        .then(() => {\r\n          setMessage(\"We'll be in touch soon.\");\r\n          setStatus(\"success\");\r\n          console.log(\"thanh cong????\");\r\n          callbackfield();\r\n          console.log(\"thanh cong va call qua????\");\r\n        })\r\n        .catch((err) => {\r\n          setMessage(err.toString());\r\n          setStatus(\"error\");\r\n          console.log(\"loi\");\r\n          console.log(\"du lieu\",data);\r\n        });\r\n    }\r\n  };\r\n\r\n  return { handleSubmit, status, message };\r\n}\r\n\r\nexport default useForm;\r\n"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,OAAO;AAEhC,SAASC,OAAO,OAAuD;EAAA;EAAA,IAAtD;IAAEC,IAAI;IAAEC,cAAc;IAAEC,WAAW;IAAEC;EAAc,CAAC;EACnE,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACQ,OAAO,EAAEC,UAAU,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAMU,OAAO,GAAG;IACd,gBAAgB,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO;EAChD,CAAC;EAED,MAAMC,YAAY,GAAIC,CAAC,IAAK;IAC1B,IAAIZ,IAAI,EAAE;MACRY,CAAC,CAACC,cAAc,EAAE;MAClBR,SAAS,CAAC,SAAS,CAAC;MACpBE,UAAU,CAAC,EAAE,CAAC;MAEd,MAAMO,iBAAiB,GAAGZ,WAAW,IAAIF,IAAI,CAACe,MAAM;MACpD,MAAMC,IAAI,GAAGC,KAAK,CAACC,IAAI,CAAClB,IAAI,CAACmB,QAAQ,CAAC,CACnCC,MAAM,CAAEC,KAAK,IAAKA,KAAK,CAACC,IAAI,CAAC,CAC7BC,MAAM,CACL,CAACC,GAAG,EAAEH,KAAK,KAAKI,MAAM,CAACC,MAAM,CAACF,GAAG,EAAE;QAAE,CAACH,KAAK,CAACC,IAAI,GAAGD,KAAK,CAACM;MAAM,CAAC,CAAC,EACjE,CAAC,CAAC,CACH;MAEH,IAAI1B,cAAc,EAAE;QAClBwB,MAAM,CAACC,MAAM,CAACV,IAAI,EAAEf,cAAc,CAAC;MACrC;MACA2B,OAAO,CAACC,GAAG,CAACb,IAAI,CAAC;MAEjBc,KAAK,CAAChB,iBAAiB,EAAE;QACvBiB,MAAM,EAAE,MAAM;QACdvB,OAAO,EAAE;UACPwB,MAAM,EAAE,kBAAkB;UAC1B,cAAc,EAAE,kBAAkB;UAClC,gBAAgB,EAAEvB,YAAY,CAACC,OAAO,CAAC,OAAO;QAChD,CAAC;QACDuB,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACnB,IAAI;MAC3B,CAAC,CAAC,CACCoB,IAAI,CAAEC,QAAQ,IAAK;QAClB,IAAIA,QAAQ,CAACjC,MAAM,KAAK,GAAG,EAAE;UAC3B,MAAM,IAAIkC,KAAK,CAACD,QAAQ,CAACE,UAAU,CAAC;QACtC;QAEA,OAAOF,QAAQ,CAACG,IAAI,EAAE;MACxB,CAAC,CAAC,CACDJ,IAAI,CAAC,MAAM;QACV7B,UAAU,CAAC,yBAAyB,CAAC;QACrCF,SAAS,CAAC,SAAS,CAAC;QACpBuB,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;QAC7B1B,aAAa,EAAE;QACfyB,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC;MAC3C,CAAC,CAAC,CACDY,KAAK,CAAEC,GAAG,IAAK;QACdnC,UAAU,CAACmC,GAAG,CAACC,QAAQ,EAAE,CAAC;QAC1BtC,SAAS,CAAC,OAAO,CAAC;QAClBuB,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;QAClBD,OAAO,CAACC,GAAG,CAAC,SAAS,EAACb,IAAI,CAAC;MAC7B,CAAC,CAAC;IACN;EACF,CAAC;EAED,OAAO;IAAEL,YAAY;IAAEP,MAAM;IAAEE;EAAQ,CAAC;AAC1C;AAAC,GA3DQP,OAAO;AA6DhB,eAAeA,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}